/*!
 * videojs-playlists - Playlists done right for Videojs
 * v0.1.0
 * 
 * copyright Antonio Laguna 2013
 * MIT License
*/
function playList(a){var b=this;b.pl=b.pl||{};var c=parseInt(a,10);return b.pl._guessVideoType=function(a){var b={webm:"video/webm",mp4:"video/mp4",ogv:"video/ogg"},c=a.split(".").pop();return b[c]||""},b.pl.init=function(a){b.pl.videos=[],b.pl.current=0,b.pl.el=b.N,b.pl.poster=b.pl._getPosterElement(),b.on("ended",b.pl._videoEnd),b.pl._addVideos(a)},b.pl._getPosterElement=function(){for(var a,c=b.pl.el.parentNode,d=0,e=c.children.length;e>d&&!a;d++)"vjs-poster"===c.children[d].className&&(a=c.children[d]);return a},b.pl._updatePoster=function(a){b.pl.el.poster=a,b.pl.poster&&(b.pl.poster.style.backgroundImage=a)},b.pl._addVideos=function(a){for(var c=0,d=a.length;d>c;c++){for(var e=[],f=0,g=a[c].src.length;g>f;f++)e.push({type:b.pl._guessVideoType(a[c].src[f]),src:a[c].src[f]});a[c].src=e,b.pl.videos.push(a[c])}},b.pl._nextPrev=function(a){var c,d;if("next"===a?(c=b.pl.videos.length-1,d=1):(c=0,d=-1),b.pl.current!==c){var e=b.pl.current+d;b.pl._setVideo(e),b.trigger(a,[b.pl.videos[e]])}},b.pl._setVideo=function(a){a<b.pl.videos.length&&(b.pl.current=a,b.pl.currentVideo=b.pl.videos[a],b.src(b.pl.videos[a].src),b.pl._updatePoster(b.pl.videos[a].poster))},b.pl._videoEnd=function(){b.pl.current===b.pl.videos.length-1?b.trigger("lastVideoEnded"):(b.one("loadstart",function(){b.play()}),b.next())},a instanceof Array?(b.pl.init(a),b.pl._setVideo(0),b):c===c?(b.pl._setVideo(c),b):"string"==typeof a&&"undefined"!=typeof b.pl[a]?(b.pl[a].apply(b),b):void 0}videojs.Player.prototype.next=function(){return this.pl._nextPrev("next"),this},videojs.Player.prototype.prev=function(){return this.pl._nextPrev("prev"),this},videojs.plugin("playList",playList);